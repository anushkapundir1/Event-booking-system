<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events</title>
</head>
<body>
    <h1>All Events</h1>

    <!-- Category Filter -->
    <h3>Filter by Category</h3>
    <ul>
        <li><a href="{% url 'event_list' %}">All</a></li>
        {% for category in categories %}
            <li>
                <a href="?category={{ category.name }}" 
                   {% if selected_category == category.name %} style="font-weight:bold;" {% endif %}>
                   {{ category.get_name_display }}
                </a>
            </li>
        {% endfor %}
    </ul>

    <hr>

    <!-- Events List -->
    {% for event in events %}
        <h2><a href="{% url 'event_detail' event.pk %}">{{ event.title }}</a></h2>
        <p>{{ event.description|truncatewords:20 }}</p>
        <p><b>Venue:</b> {{ event.venue }}</p>
        <p><b>Date:</b> {{ event.date_time }}</p>
        <p><b>Category:</b> {{ event.category.get_name_display }}</p>
        <hr>
    {% empty %}
        <p>No events found in this category.</p>
    {% endfor %}
</body>
</html>
